{% extends "base.html" %}
{% load staticfiles %}
{% load i18n %}

{% block content_top %}

{% block breadcrumbs %}

{% if request.session.session_obj %}

  <div class="columns">
  <div class="column is-10 is-offset-1">

  <nav class="breadcrumb">
  <ul>
  {% block breadcrumb_content %}

  {% include 'reading/includes/_reading_breadcrumbs.html' %}

  {% endblock breadcrumb_content %}
  </ul>
  </nav>

  </div>
  </div>

{% endif %}

{% endblock breadcrumbs %}

{% endblock content_top %}

{% block sidebar_nav_items %}

{% if request.session.session_obj.project %}

  <div class="menu">

  <p class="menu-label">
  {% trans 'label_project' %}
  </p>

  <p class="menu-header">
  <a id="sidebar-nav-project-name" href="{% url 'reading:project' project.id project.slug %}">
  <span id="menu-project-name"> {{ project.name }} </span>
  </a>
  </p>

  <ul class="menu-list">

  {% if project.owner_id == user.id %}

    <li>
    <a 
    id="sidebar-nav-project-edit" 
    class="{% block project_update_link_active %}{% endblock project_update_link_active %}" 
    href="{% url 'reading:project_update' project.id project.slug %}"
    >
    <i class="menu-icon fas fa-edit fa-fw"></i> {% trans "label_edit_project" %}
    </a>
    </li>

    <li>
    <a 
    id="sidebar-nav-reading-create" 
    class="{% block reading_create_link_active %}{% endblock reading_create_link_active %}" 
    href="{% url 'reading:reading_create' project.id project.slug %}"
    >
    <i class="menu-icon fas fa-plus fa-fw"></i> {% trans "label_new_reading" %}
    </a>
    </li>

    <span class="sidebar-divider"></span>

  {% endif %}

  </ul>

  </div>

{% elif request.session.session_obj.reading %}

  <div class="menu">

  <p class="menu-label">
  {% trans 'label_project' %}
  </p>

  <p class="menu-header">
  <a id="sidebar-nav-project-name" href="{% url 'reading:project' project.id project.slug %}">
  <span id="menu-project-name"> {{ project.name }} </span>
  </a>
  </p>

  <ul class="menu-list">

  <span class="sidebar-divider"></span>

  </ul>

  </div>

  <div class="menu">

  <p class="menu-label">
  {% trans 'label_reading' %}
  </p>

  <p class="menu-header">
  <a id="sidebar-nav-reading-name" href="{% url 'reading:reading' reading.id reading.slug %}">
  <span id="menu-reading-name"> {{ reading.name }} </span>
  </a>
  </p>

  <ul class="menu-list">

  {% if reading_admin %}

    <li>
    <a 
    id="sidebar-nav-reading-edit" 
    class="{% block reading_update_link_active %}{% endblock reading_update_link_active %}" 
    href="{% url 'reading:reading_update' reading.id reading.slug %}"
    >
    <i class="menu-icon fas fa-edit fa-fw"></i> {% trans "label_edit_reading" %}
    </a>
    </li>

  {% endif %}

  <span class="sidebar-divider"></span>

  </ul>

  </div>

{% endif %}

{{ block.super }}

{% endblock sidebar_nav_items %}

{% block python_to_javascript %}

var appSessionUrl = "{% url 'app:app_session' %}";

{% endblock python_to_javascript %}

